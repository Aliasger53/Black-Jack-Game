useVar={};let delearSum=0,add=0,hiddenCard,firstCard,firstCardDetails,card;function resettingVaraibales(){let e=deckCreaction();return useVar={shuffleDeck:e,aceCount:0,yourSum:0,count:0}}function deckCreaction(){let e=["H","C","S","D"],a=["A",2,3,4,5,6,7,8,9,10,"J","Q","K"],t=[],r,d;for(i=0;i<e.length;i++)for(j=0;j<a.length;j++)t.push(a[j]+"-"+e[i]);for(i=t.length-1;i>0;i--)r=Math.floor(Math.random()*(i+1)),d=t[i],t[i]=t[r],t[r]=d;return t}function startGame(){let e=document.createElement("img");for(e.src="./cards/BACK.png",e.id="hidden",e.alt="Flipped-Card",document.getElementById("dealer-cards").append(e),firstCardDetails=cardType(firstCard=useVar.shuffleDeck.shift()),delearSum=cardValues(firstCard);delearSum<17;)(delearSum+=add=cardValues(card=cardDisplay("dealer-cards")))>21&&(delearSum-=10*useVar.aceCount,useVar.aceCount=0);for(i=0,useVar.aceCount=0,add=0;i<2;i++)add=cardValues(card=cardDisplay("your-cards")),useVar.yourSum+=add;hiddenCard=document.getElementById("hidden"),document.getElementById("hit").addEventListener("click",hit),document.getElementById("stay").addEventListener("click",stay),document.getElementById("restartGame").addEventListener("click",restartGame)}function hit(){useVar.count>0?msg():useVar.yourSum<=21&&(add=cardValues(card=cardDisplay("your-cards")),useVar.yourSum+=add),useVar.yourSum>21&&useVar.aceCount>0?(useVar.yourSum=useVar.yourSum-10*useVar.aceCount,useVar.aceCount=0):useVar.yourSum>21&&(result(),hiddenCard.src="./cards/"+firstCard+".png",hiddenCard.alt=firstCardDetails[0]+"-of-"+firstCardDetails[1]+"-img")}function stay(){useVar.count>0?msg():(result(),hiddenCard.src="./cards/"+firstCard+".png",hiddenCard.alt=firstCardDetails[0]+"-of-"+firstCardDetails[1]+"-img")}function cardValues(e){let a,t=0;return"A"==(a=e.split("-"))[0]?(useVar.aceCount++,t=11):t=isNaN(a[0])?10:parseInt(a[0]),t}function cardDisplay(e){let a;a=cardType(card=useVar.shuffleDeck.shift());let t=document.createElement("img");return t.src="./cards/"+card+".png",t.alt=a[0]+"-of-"+a[1]+"-img",document.getElementById(e).append(t),card}function result(){document.getElementById("dealer-sum").innerHTML=delearSum,document.getElementById("your-sum").innerHTML=useVar.yourSum,useVar.yourSum>21?(document.getElementById("results").innerHTML="You lost the game",useVar.count=1):delearSum==useVar.yourSum?(document.getElementById("results").innerHTML="Its a draw",useVar.count=2):useVar.yourSum>delearSum||delearSum>21?(document.getElementById("results").innerHTML="You win the game",useVar.count=3):(document.getElementById("results").innerHTML="You lost the game",useVar.count=1)}function msg(){1==useVar.count?(alert("You already lost the game, please play agian"),restartGame()):2==useVar.count?(alert("The game was a draw, please play agian"),restartGame()):3==useVar.count&&(alert("You already won the game, please play agian"),restartGame())}function restartGame(){resettingVaraibales(),document.getElementById("dealer-cards").innerHTML="",document.getElementById("your-cards").innerHTML="",document.getElementById("dealer-sum").innerHTML="",document.getElementById("your-sum").innerHTML="",document.getElementById("results").innerHTML="",startGame()}function cardType(e){let a,t;for(k=0,cardSpliter=e.split("-");k<4;k++)"H"==cardSpliter[1]?(a="Hearts",t=cardSpliter[0]):"C"==cardSpliter[1]?(a="Clubs",t=cardSpliter[0]):"S"==cardSpliter[1]?(a="Spades",t=cardSpliter[0]):(a="Diamonds",t=cardSpliter[0]);return[t,a]}window.onload=function(){resettingVaraibales(),startGame()};
